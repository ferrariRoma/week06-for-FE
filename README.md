# 이노베이션 캠프 6주차 미니 프로젝트 프론트 엔드

## 컴포넌트 담당

|  이름  | 담당                             |
| :----: | :------------------------------- |
| 박지민 | 게시글 작성, 수정, 배포, 인트로  |
| 김종현 | 로그인, 로그아웃, 회원가입       |
| 안동규 | ~~메인~~, 상세, 마이페이지, 댓글 |

#### 추가작업

- 게시글(삭제) - api, redux state 수정

### 스택

- [x] 리액트
- [ ] 리덕스(toolkit)
- [x] styled-components
- [x] react-router-dom
- [x] axios
- [x] mock API

## Trouble Shooting

- 헤더 모양 및 사이드바 유무
  사이드바를 상시 보이게 하면 모든 페이지에서, 심지어 유저가 사이드바가 필요없는 상황에서도 사이드바는 view width를 차지하고 있게 됨. 목록이 특히나 두 개 밖에 없어서 있다 해도 사이드바 안 공간도 낭비가 많음 👉 없애기로 결정
- 사이드바에 있는 내용을 헤더로 이동
  이렇게 되면 로고나 로그인 등 기존 UI의 위치가 애매해 짐. 그래서 로고를 위에 넣고 밑에 로그인 등 다른 UI를 넣는 게 어떤지 토론을 했음(2단 헤더). 이에 대한 예시 페이지로는 SSG와 무신사 페이지를 참고함. 하지만 inflearn페이지를 보고 나서 1단으로 하되 position을 fixed로 해서 고정해두는 것이 훨씬 낫다고 판단. 다른 팀원들과 회의를 통해서 수정하기로 결정.
- Pagenation을 구현하던 중에 useEffect사용과 관련해서 고민이 있었음. 페이지 nav를 클릭해서 1page, 2page... 로 넘어갈 때 useEffect안에 해당
  페이지에 들어갈 게시물을 계산하는 로직을 넣었다. 하지만 생각해보니 어차피 같은 컴포넌트 안에 있는 setPage가 작동되면 해당 컴포넌트 전체가 재실행 될탠데 그렇다면 굳이 넣을 필요는 없다는 판단이 들었다. 넣는다면 의존성 배열에 page를 설정해주면 되는데, 안하는 것과 똑같은 효과이기 때문에 괜히 또 쓰지 않았다.
- 드랍다운에서 클릭을 했을 때 클릭한 값에 벨류는 저장이 되지만 뷰가 바뀌지 않는 현상. state의 문제? 일단 현재 클릭한 값을 드랍다운의 벨류로 바뀌게 변경해서 해결함.
- Textarea에서 DB로 값을 보내면 DB에서 다시 값을 받아올 때 그냥 보내면 띄어쓰기가 반영이 안되서 돌아온다. textarea에 wrap="hard" 속성을 주어서 텍스트 줄바꿈, 띄워쓰기등을 정규표현식으로 보내주고 수정할때는 정규표현식을 <br/>로 치환하여 수정시켜 띄어쓰기와 줄바꿈을 가능하게 했다.
- Thunk사용을 하지 않고 비동기 통신을 통해서 컴포넌트의 요소를 .map을 통해 채워넣을 때 통신이 완료되기 전에 컴포넌트가 렌더링 되면서 에러가 발생하는 경우가 발생. 옵셔널 체이닝을 통해서 해결하였다.
- axios를 이용해서 비동기 통신을 하는데 통신에서 400번이나 500번 대 코드가 응답왔을 때 처리할 수 있는 로직이 없다.
- 수정했을 때, 백에 axios.put을 보내면, 프론트에서는 그걸 어떻게 반영할 건지. 상위 컴포넌트에서 props로 그냥 comment를 setState하는 친구를 props로 받아와서 삭제할 때 마다 setState 돌려서 프론트에 반영해준다.
- 수정 칸에 들어갔다가 취소를 누르고 다시 수정을 하러 들어갔을 때 textarea가 텅 비어있는 문제가 발생. 확인해보니 ref에 할당된 초기값을 사용하기 때문에 일어난 문제였다. defaultValue를 ref 말고 state로 하면 해결이 된다. ref로 하면 취소 버튼을 눌러서 textarea가 화면에서 사라질 때 ref가 참조할 수 있는 부분이 브라우저 상에서 사라지기 때문에 null이 되고, 이후에는 할당된 null이 textarea의 defaultValue로 들어오기 때문에 빈 칸이 출력된 것이다.
